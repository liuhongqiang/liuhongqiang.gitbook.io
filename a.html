<html>
<head>
<script src="agent.min.js"></script>
<script
  src="http://code.jquery.com/jquery-1.12.4.min.js"
  integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ="
  crossorigin="anonymous"></script>
<script>
(function(){
	// js error
	window.addEventListener('error', function(event) { 
   		var message = event.message;
   		var filename = event.filename;
   		var lineno = event.lineno;
   		var colno = event.colno;
   		var href = event.target.location.href;
   		var userAgent = window.navigator.userAgent;
   		console.log(message + "\n" + filename + "\n"  + lineno + "\n"  + colno + "\n"  + href  + "\n" + userAgent);
 	});
 	// ajax error
 	var wrapSend = function(originSend){
 		return function(){
 			var parm = arguments[0] || "";
 			this.addEventListener("readystatechange",function(){
 				if(this.readyState == 4) {
 					try{
		 				var url = this._runtime.url;
			 			var method = this._runtime.method;
			 			var start = this._runtime.start;
			 			var status = this.status;
			 			var responseText = this.responseText;
			 			var statusText = this.statusText;
			 			var href = window.location.href;
			 			var userAgent = window.navigator.userAgent;
			 			console.log(url + "\n" + method + "\n"  + start + "\n"  + status + "\n"  + statusText + "\n"  + responseText + "\n"  + parm  + "\n" + href+ "\n" + userAgent);
		 			} catch(e){}
 				}
 			});
 			try {
                return originSend.apply(this, arguments)
            } catch(p) {
                return Function.prototype.apply.call(originSend, this, arguments)
            }
 		};
 	};
 	var originSend = window.XMLHttpRequest.prototype.send;
 	window.XMLHttpRequest.prototype.send = wrapSend(originSend);
})();

$.ajax({
  'url':'http://localhost:9411',
  'contentType':'application/json',
  'type':'POST',
  'data':'asd'
});


asdfasdfasdfasdf


</script>
</head>
<body>
asdasdf
</body>
</html>
